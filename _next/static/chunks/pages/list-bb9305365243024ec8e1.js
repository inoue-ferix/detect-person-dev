_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{d0mU:function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),o=n("HaE+"),c=n("oDCQ"),s=n("awqx"),i=n("8Kt/"),l=n.n(i),u=n("q1tI"),d=n.n(u),f=n("q5K1"),p=n("k5gE"),m=d.a.createElement,b=Object(p.a)();function g(e){var t=e.onDateChanged;return m("div",{className:"relative"},m("select",{className:"h-full form-select rounded border sm:rounded-none sm:border-0   block appearance-none w-full bg-white border-gray-400 text-gray-700 py-2 px-4 pr-8  focus:outline-none focus:border  focus:bg-white focus:border-gray-500",onChange:t},b.map((function(e){return m("option",{value:e.key,key:e.key},e.name)}))),m("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700"},m("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},m("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"}))))}var h=d.a.createElement;function y(e){var t,n=e.onDeleteButtonClicked,a=e.selectedIds;return h("button",{className:"".concat((t=a.length>0,t?"bg-opacity-100 cursor-pointer":"bg-opacity-50 cursor-not-allowed")," rounded bg-teal-500 text-white font-bold py-2 px-6 ml-2 flex items-center"),onClick:n},"\u9078\u629e\u9805\u76ee\u3092\u524a\u9664")}var v=n("TGEI");var x=n("ODXe"),w=n("AL3R"),k=n("rzrB"),N=n("xsdW");w.default.configure(k.a);var j=n("a3WO");var O=n("BsWD");function E(e){return function(e){if(Array.isArray(e))return Object(j.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(O.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var C=n("/MvE"),S=n.n(C),D=d.a.createElement;function _(e){var t,n=e.log,a=e.tmpDesc,r=e.setTmpDesc,o=e.onSaveButtonPushed,c=Object(u.useState)(!1),s=c[0],i=c[1];return D(d.a.Fragment,null,!s&&D(d.a.Fragment,null,D("p",{className:"text-gray-700 px-6 py-3 whitespace-pre-wrap"},n.desc||"(\u306a\u3057)"),D("p",{className:"text-right mr-5"},D("a",{onClick:function(){return i(!0)},className:"text-xs cursor-pointer"},"(\u30e1\u30e2\u7de8\u96c6)"))),s&&D("div",{className:"flex flex-col"},D("textarea",{className:"resize border form-textarea ",rows:3,onChange:function(e){r(e.target.value)},defaultValue:null!==(t=n.desc)&&void 0!==t?t:""}),D("div",{className:"mt-2 flex flex-row justify-center"},D("button",{className:"rounded bg-teal-500 text-white font-bold py-2 px-6  flex items-center",onClick:function(){o(n.id,a),i(!1)}},"\u4fdd\u5b58"),D("button",{className:"ml-2 rounded bg-gray-200 text-gray-600 font-bold py-2 px-6 flex items-center",onClick:function(){i(!1)}},"\u30ad\u30e3\u30f3\u30bb\u30eb"))))}var L=d.a.createElement,I=[{key:"time",name:"\u6642\u9593"},{key:"image",name:"\u753b\u50cf"},{key:"description",name:"\u5099\u8003"}],B=function(e,t){return e.time<t.time?1:e.time>t.time?-1:0};function q(e){var t=e.wildlifeLogs,n=e.setSelectedIds,a=e.selectedIds,r=e.onSaveButtonPushed,o=Object(u.useState)(""),c=o[0],s=o[1];if(!t)return L("div",null,"Loading...");var i=function(e){if(e.target.checked){var t=[].concat(E(a),[e.target.id]);n(t)}else{var r=a.filter((function(t){return t!==e.target.id}));n(r)}};return L("div",null,L("div",{className:"rounded-lg shadow","data-testid":"log_main"},L("table",{className:"table-auto w-full bg-white table-striped relative"},L("thead",null,L("tr",{className:"text-left"},L("th",{className:"py-2 px-3 top-0 border-b border-gray-200 bg-gray-100 w-1"},L("label",{className:"text-teal-500 inline-flex justify-between items-center hover:bg-gray-200 px-2 py-2 rounded-lg cursor-pointer"},L("input",{type:"checkbox",onChange:function(e){if(e.target.checked){var a=t.map((function(e){return e.id}));n(a)}else n([])},className:"".concat(S.a["form-checkbox"]," focus:outline-none focus:shadow-outline")}))),I.map((function(e){return L("th",{className:"bg-gray-100 sticky top-0 border-b border-gray-200 px-6 py-2 text-gray-600 font-bold tracking-wider uppercase text-xs",key:e.key},e.name)})))),L("tbody",null,t.sort(B).map((function(e){return L("tr",{key:e.id},L("td",{className:"border-dashed border-t border-gray-200 px-3 align-top"},L("label",{className:"text-teal-500 inline-flex justify-between items-center hover:bg-gray-200 px-2 py-2 rounded-lg cursor-pointer"},L("input",{type:"checkbox",checked:(t=e.id,a.some((function(e){return e===t}))),onChange:i,id:e.id,className:"".concat(S.a["form-checkbox"],"  rowCheckbox focus:outline-none focus:shadow-outline")}))),L("td",{className:"border-dashed border-t border-gray-200 w-2 align-top"},L("span",{className:"text-gray-700 md:px-3 py-3"},new Date(1e3*e.time).toLocaleString("ja-JP",{timeZone:"Asia/Tokyo"}))),L("td",{className:"border-dashed border-t border-gray-200 align-top",width:"200px"},L("div",null,L("a",{href:e.imageUrl,target:"_blank"},L("img",{src:e.imageUrl,style:{width:200}})))),L("td",{className:"border-dashed border-t border-gray-200 w-2/5  break-words whitespace-normal align-top"},L(_,{onSaveButtonPushed:r,tmpDesc:c,setTmpDesc:s,log:e})));var t}))))))}var W=d.a.createElement;t.default=function(){var e=function(){var e=Object(u.useState)(null),t=e[0],n=e[1];return Object(u.useEffect)((function(){n([{lat:111.111,lng:111.111,location:"\u99d0\u8eca\u5834"}])}),[]),t}(),t=function(){var e=Object(u.useState)(null),t=e[0],n=e[1];function a(e){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function e(t){var a,o,i,l,u,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(p.c)(t),o=Object(x.a)(a,2),i=o[0],l=o[1],u={time:{ge:i,le:l}},e.prev=2,e.next=5,c.a.graphql(Object(s.b)(N.a,{filter:u}));case 5:"data"in(d=e.sent)&&d.data&&n(d.data.listWildlifeRecords.items),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){function e(){return(e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(Object(p.b)());case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{wildlifeLogs:t,setWildlifeLogs:n,setWildlifelogByDate:a}}(),n=t.wildlifeLogs,a=t.setWildlifeLogs,i=t.setWildlifelogByDate,d=Object(u.useState)([]),m=d[0],b=d[1];function h(){return(h=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t.target.value);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(o.a)(r.a.mark((function e(t,o){var i,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={id:t,desc:o},e.prev=1,e.next=4,c.a.graphql(Object(s.b)(v.c,{input:i}));case 4:l=n.map((function(e){return e.id===t?(e.desc=o,e):e})),a(l),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert("".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var k=function(){var e=Object(o.a)(r.a.mark((function e(){var t,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={ids:m},e.next=3,c.a.graphql(Object(s.b)(v.b,{input:t}));case 3:o=e.sent,console.log(o),i=n.filter((function(e){return!m.includes(e.id)})),a(i),b([]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return W("div",{className:"container mx-auto"},W("div",{className:""},W(l.a,null,W("title",null,"MORI ANIMAL | \u4e00\u89a7\u753b\u9762")),W(f.a,null),W("div",{className:" flex flex-row mb-4  justify-between"},W(g,{onDateChanged:function(e){return h.apply(this,arguments)}}),W(y,{selectedIds:m,onDeleteButtonClicked:k})),W("div",{className:"mb-6"},W(q,{wildlifeLogs:n,settingList:e,setSelectedIds:b,selectedIds:m,onSaveButtonPushed:function(e,t){return w.apply(this,arguments)}}))))}},zCqn:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/list",function(){return n("d0mU")}])}},[["zCqn",0,1,4,3,7,2,5,6,8]]]);